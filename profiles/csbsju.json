{
  "remote_storage": {
    "AWS_ACCESS_KEY_ID": "<key here>",
    "AWS_SECRET_ACCESS_KEY": "<key here>",
    "AWS_REGION": "us-west-2",
    "AWS_BUCKET": "dpla.hub.umn.csbsju"
  },
  "validator": {
    "base_url": "http://localhost:8083/api/v1/validate",
    "api_key": "<key here>",
    "dpla_api_key": "<key here>"
  },
  "extractor": {
    "records": {
      "base_url": "http://localhost:8083/api/v1/extract",
      "endpoint_type": "oai_dc",
      "api_key": "<key here>",
      "origin_path": "records",
      "endpoint": "http://cdm.csbsju.edu/oai/oai.php",
      "suppress_prefix": true,
      "cache_response": true
    },
    "enrichments": [
      {
        "url": "http://localhost:3009/api/v1/extract?endpoint_type=oai_dc&api_key=<key here>&verb=ListSets&endpoint=http://cdm.csbsju.edu/oai/oai.php&cache_response=true",
        "key": "listSets"
      }
    ]
  },
  "transformer": {
    "base_url": "http://localhost:8083/api/v1/transform",
    "api_key": "<key here>",
    "@context": {
      "edm": "http://www.europeana.eu/schemas/edm/",
      "isShownAt": "edm:isShownAt",
      "dpla": "http://dp.la/terms/",
      "dataProvider": "edm:dataProvider",
      "aggregatedDigitalResource": "dpla:aggregatedDigitalResource",
      "state": "dpla:state",
      "hasView": "edm:hasView",
      "provider": "edm:provider",
      "collection": "dpla:aggregation",
      "object": "edm:object",
      "stateLocatedIn": "dpla:stateLocatedIn",
      "begin": {
        "@type": "xsd:date",
        "@id": "dpla:dateRangeStart"
      },
      "@vocab": "http://purl.org/dc/terms/",
      "LCSH": "http://id.loc.gov/authorities/subjects",
      "sourceResource": "edm:source0.Resource",
      "name": "xsd:string",
      "coordinates": "dpla:coordinates",
      "end": {
        "@type": "xsd:date",
        "@id": "dpla:dateRangeEnd"
      },
      "originalRecord": "dpla:originalRecord"
    },
          "fields": {
            "pushToDPLA": {
                "origins": [
                    {
                        "value": true
                    }
                ]
            },
            "identifier": {
                "origins": [
                    {
                        "path": "guid[last()]"
                    }
                ]
            },
            "isShownAt": {
                "origins": [
                    {
                        "path": "uri"
                    }
                ]
            },
            "object": {
                "origins": [
                    {
                        "path": "image[first()]"
                    }
                ]
            },
            "dataProvider": {
                "origins": [
                    {
                        "path": "origin[last()]"
                    }
                ]
            },
            "sourceResource/publisher": {
                "origins": [
                    {
                        "path": "metadata/dc/source"
                    }
                ]
            },
            "provider": {
                "origins": [
                    {
                        "value": {
                            "@id": "http://dp.la/api/contributor/mpr",
                            "name": "Minnesota Public Radio"
                        }
                    }
                ]
            },
            "title": {
                "origins": [
                    {
                        "path": "title"
                    }
                ],
                "processors": [
                    {
                        "process": "html_decode"
                    },
                    {
                        "process": "strip_html"
                    }
                ]
            },
            "sourceResource/title": {
                "origins": [
                    {
                        "path": "title"
                    }
                ],
                "processors": [
                    {
                        "process": "html_decode"
                    },
                    {
                        "process": "strip_html"
                    }
                ]
            },
            "sourceResource/date/begin": {
                "origins": [
                    {
                        "path": "publish_date[last()]"
                    }
                ],
                "processors": [
                    {
                        "process": "split",
                        "args": [
                            "-"
                        ]
                    },
                    {
                        "process": "first"
                    }
                ]
            },
            "sourceResource/date/end": {
                "origins": [
                    {
                        "path": "publish_date[last()]"
                    }
                ],
                "processors": [
                    {
                        "process": "split",
                        "args": [
                            "-"
                        ]
                    },
                    {
                        "process": "first"
                    }
                ]
            },
            "sourceResource/date/displayDate": {
                "origins": [
                    {
                        "path": "publish_date[last()]"
                    }
                ]
            },
            "sourceResource/creator": {
                "origins": [
                    {
                        "path": "author"
                    }
                ],
                "processors": [
                    {
                        "process": "compact"
                    },
                    {
                        "process": "nil_if_empty"
                    }
                ]
            },
            "sourceResource/description": {
                "origins": [
                    {
                        "path": "summary"
                    }
                ],
                "processors": [
                    {
                        "process": "html_decode"
                    },
                    {
                        "process": "strip_html"
                    },
                    {
                        "process": "gsub",
                        "args": {
                            "pattern": "Dateline: St. Paul, Minn.",
                            "replacement": ""
                        }
                    },
                    {
                        "process": "match_first",
                        "args": [
                            ".*\n$"
                        ]
                    }
                ]
            },
            "sourceResource/subject": {
                "label": "name",
                "origins": [
                    {
                        "path": "metadata/dc/subject"
                    }
                ],
                "processors": [
                    {
                        "process": "split",
                        "args": [
                            "; "
                        ]
                    },
                    {
                        "process": "flatten"
                    },
                    {
                        "process": "unique"
                    },
                    {
                        "process": "strip"
                    },
                    {
                        "process": "gsub",
                        "args": {
                            "pattern": "\\s--\\s",
                            "replacement": "--"
                        }
                    }
                ]
            }
        }
    }
}
